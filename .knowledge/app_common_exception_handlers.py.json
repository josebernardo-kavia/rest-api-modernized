{"is_source_file": true, "format": "Python", "description": "This file defines centralized exception handling logic for a FastAPI-based REST API, including registration of handlers for various exceptions, generating RFC7807 problem detail responses, and logging errors.", "external_files": ["app.common.errors", "app.domain.errors", "starlette.responses", "fastapi", "sqlalchemy.exc"], "external_methods": ["fastapi.exception_handler", "starlette.responses.JSONResponse", "logging.getLogger"], "published": ["register_exception_handlers"], "classes": [{"name": "ProblemDetail", "description": "Data model for RFC7807 problem details used in error responses."}], "methods": [{"name": "str _instance_from_request(request: Request)", "description": "Returns a stable instance URI based on request path.", "scope": "", "scopeKind": ""}, {"name": "JSONResponse _problem_response(problem: ProblemDetail, *, headers: Optional[Dict[str, str]] = None)", "description": "Constructs a JSONResponse with RFC7807 media type carrying the error details.", "scope": "", "scopeKind": ""}, {"name": "None register_exception_handlers(app: Any)", "description": "Registers multiple global exception handlers on the FastAPI app.", "scope": "", "scopeKind": ""}, {"name": "str _title_from_status(status_code: int)", "description": "Returns a standard title string for common HTTP status codes for RFC7807.", "scope": "", "scopeKind": ""}, {"name": "JSONResponse dbapi_error_handler(request: Request, exc: DBAPIError)", "scope": "register_exception_handlers", "scopeKind": "function", "description": "unavailable"}, {"name": "JSONResponse http_exception_handler(request: Request, exc: HTTPException)", "scope": "register_exception_handlers", "scopeKind": "function", "description": "unavailable"}, {"name": "JSONResponse integrity_error_handler(request: Request, exc: IntegrityError)", "scope": "register_exception_handlers", "scopeKind": "function", "description": "unavailable"}, {"name": "JSONResponse not_found_exception_handler(request: Request, exc: NotFoundError)", "scope": "register_exception_handlers", "scopeKind": "function", "description": "unavailable"}, {"name": "JSONResponse permission_error_handler(request: Request, exc: PermissionError)", "scope": "register_exception_handlers", "scopeKind": "function", "description": "unavailable"}, {"name": "JSONResponse sqlalchemy_error_handler(request: Request, exc: SQLAlchemyError)", "scope": "register_exception_handlers", "scopeKind": "function", "description": "unavailable"}, {"name": "JSONResponse unhandled_exception_handler(request: Request, exc: Exception)", "scope": "register_exception_handlers", "scopeKind": "function", "description": "unavailable"}, {"name": "JSONResponse validation_exception_handler(request: Request, exc: RequestValidationError)", "scope": "register_exception_handlers", "scopeKind": "function", "description": "unavailable"}], "calls": ["app.exception_handler", "_problem_response", "logger.info", "logger.error"], "search-terms": ["exception_handlers", "RFC7807", "fastapi", "problem details", "centralized error handling", "app.common.errors", "app.domain.errors"], "state": 2, "file_id": 45, "knowledge_revision": 108, "git_revision": "e6384165a844054d79619f77ee0d4e438cd1d35f", "ctags": [{"_type": "tag", "name": "PROBLEM_JSON_MEDIA_TYPE", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/common/exception_handlers.py", "pattern": "/^PROBLEM_JSON_MEDIA_TYPE = \"application\\/problem+json\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_instance_from_request", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/common/exception_handlers.py", "pattern": "/^def _instance_from_request(request: Request) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(request: Request)"}, {"_type": "tag", "name": "_problem_response", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/common/exception_handlers.py", "pattern": "/^def _problem_response(problem: ProblemDetail, *, headers: Optional[Dict[str, str]] = None) -> JS/", "language": "Python", "typeref": "typename:JSONResponse", "kind": "function", "signature": "(problem: ProblemDetail, *, headers: Optional[Dict[str, str]] = None)"}, {"_type": "tag", "name": "_title_from_status", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/common/exception_handlers.py", "pattern": "/^def _title_from_status(status_code: int) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(status_code: int)"}, {"_type": "tag", "name": "dbapi_error_handler", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/common/exception_handlers.py", "pattern": "/^    async def dbapi_error_handler(request: Request, exc: DBAPIError) -> JSONResponse:$/", "file": true, "language": "Python", "typeref": "typename:JSONResponse", "kind": "function", "signature": "(request: Request, exc: DBAPIError)", "scope": "register_exception_handlers", "scopeKind": "function"}, {"_type": "tag", "name": "http_exception_handler", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/common/exception_handlers.py", "pattern": "/^    async def http_exception_handler(request: Request, exc: HTTPException) -> JSONResponse:$/", "file": true, "language": "Python", "typeref": "typename:JSONResponse", "kind": "function", "signature": "(request: Request, exc: HTTPException)", "scope": "register_exception_handlers", "scopeKind": "function"}, {"_type": "tag", "name": "integrity_error_handler", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/common/exception_handlers.py", "pattern": "/^    async def integrity_error_handler(request: Request, exc: IntegrityError) -> JSONResponse:$/", "file": true, "language": "Python", "typeref": "typename:JSONResponse", "kind": "function", "signature": "(request: Request, exc: IntegrityError)", "scope": "register_exception_handlers", "scopeKind": "function"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/common/exception_handlers.py", "pattern": "/^logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "not_found_exception_handler", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/common/exception_handlers.py", "pattern": "/^    async def not_found_exception_handler(request: Request, exc: NotFoundError) -> JSONResponse:$/", "file": true, "language": "Python", "typeref": "typename:JSONResponse", "kind": "function", "signature": "(request: Request, exc: NotFoundError)", "scope": "register_exception_handlers", "scopeKind": "function"}, {"_type": "tag", "name": "permission_error_handler", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/common/exception_handlers.py", "pattern": "/^    async def permission_error_handler(request: Request, exc: PermissionError) -> JSONResponse:$/", "file": true, "language": "Python", "typeref": "typename:JSONResponse", "kind": "function", "signature": "(request: Request, exc: PermissionError)", "scope": "register_exception_handlers", "scopeKind": "function"}, {"_type": "tag", "name": "register_exception_handlers", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/common/exception_handlers.py", "pattern": "/^def register_exception_handlers(app: Any) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(app: Any)"}, {"_type": "tag", "name": "sqlalchemy_error_handler", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/common/exception_handlers.py", "pattern": "/^    async def sqlalchemy_error_handler(request: Request, exc: SQLAlchemyError) -> JSONResponse:$/", "file": true, "language": "Python", "typeref": "typename:JSONResponse", "kind": "function", "signature": "(request: Request, exc: SQLAlchemyError)", "scope": "register_exception_handlers", "scopeKind": "function"}, {"_type": "tag", "name": "unhandled_exception_handler", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/common/exception_handlers.py", "pattern": "/^    async def unhandled_exception_handler(request: Request, exc: Exception) -> JSONResponse:$/", "file": true, "language": "Python", "typeref": "typename:JSONResponse", "kind": "function", "signature": "(request: Request, exc: Exception)", "scope": "register_exception_handlers", "scopeKind": "function"}, {"_type": "tag", "name": "validation_exception_handler", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/common/exception_handlers.py", "pattern": "/^    async def validation_exception_handler(request: Request, exc: RequestValidationError) -> JSO/", "file": true, "language": "Python", "typeref": "typename:JSONResponse", "kind": "function", "signature": "(request: Request, exc: RequestValidationError)", "scope": "register_exception_handlers", "scopeKind": "function"}], "hash": "eed7c8d0292dd7a03ed41531257cecc0", "format-version": 4, "code-base-name": "rest-api-modernized", "filename": "app/common/exception_handlers.py", "fields": [{"name": "PROBLEM_JSON_MEDIA_TYPE = \"application\\/problem+json\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"108": "e6384165a844054d79619f77ee0d4e438cd1d35f"}]}