{"is_source_file": true, "format": "Python", "description": "This file manages OpenID Connect (OIDC) discovery and JSON Web Key Set (JWKS) retrieval with caching, specifically compatible with Keycloak. It provides functions to fetch and cache the OIDC configuration and JWKS, with cache invalidation support.", "external_files": ["app.core.config", "httpx"], "external_methods": ["httpx.AsyncClient.get", "httpx.AsyncClient.aclose", "resp.raise_for_status", "resp.json", "get_settings"], "published": ["fetch_oidc_discovery", "fetch_jwks", "clear_oidc_caches"], "classes": [{"name": "_CacheEntry", "description": "Immutable dataclass used for caching values with expiration time."}], "methods": [{"name": "float _now()", "description": "Returns the current time as a float timestamp.", "scope": "", "scopeKind": ""}, {"name": "Optional[Dict[str,Any]] _cache_get(entry: Optional[_CacheEntry])", "description": "Retrieves cached value if it hasn't expired, otherwise returns None.", "scope": "", "scopeKind": ""}, {"name": "_CacheEntry _cache_set(value: Dict[str, Any], ttl_seconds: int)", "description": "Creates a cache entry with a value and expiration timestamp.", "scope": "", "scopeKind": ""}, {"name": "str _resolve_issuer(settings: Settings)", "description": "Determines the issuer URL from provided or default settings, handling fallbacks.", "scope": "", "scopeKind": ""}, {"name": "None clear_oidc_caches()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str,Any] fetch_jwks( *, settings: Optional[Settings] = None, http_client: Optional[httpx.AsyncClient] = None )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str,Any] fetch_oidc_discovery( *, settings: Optional[Settings] = None, http_client: Optional[httpx.AsyncClient] = None )", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["get_settings", "httpx.AsyncClient.get", "resp.raise_for_status", "resp.json", "_cache_get", "_cache_set", "_resolve_issuer", "fetch_oidc_discovery", "fetch_jwks", "clear_oidc_caches"], "search-terms": ["OIDC discovery", "JWKS retrieval", "Keycloak", "OIDC_ISSUER_URL", "_CacheEntry", "cache", "async fetch", "caching OpenID connect", "JWKS cache"], "state": 2, "file_id": 31, "knowledge_revision": 70, "git_revision": "51e2f0274e3519ee6277de5e8d3429874852c597", "ctags": [{"_type": "tag", "name": "_CacheEntry", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/auth/oidc.py", "pattern": "/^class _CacheEntry:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_DISCOVERY_CACHE", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/auth/oidc.py", "pattern": "/^_DISCOVERY_CACHE: Optional[_CacheEntry] = None$/", "language": "Python", "typeref": "typename:Optional[_CacheEntry]", "kind": "variable"}, {"_type": "tag", "name": "_JWKS_CACHE", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/auth/oidc.py", "pattern": "/^_JWKS_CACHE: Optional[_CacheEntry] = None$/", "language": "Python", "typeref": "typename:Optional[_CacheEntry]", "kind": "variable"}, {"_type": "tag", "name": "_cache_get", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/auth/oidc.py", "pattern": "/^def _cache_get(entry: Optional[_CacheEntry]) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "function", "signature": "(entry: Optional[_CacheEntry])"}, {"_type": "tag", "name": "_cache_set", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/auth/oidc.py", "pattern": "/^def _cache_set(value: Dict[str, Any], ttl_seconds: int) -> _CacheEntry:$/", "language": "Python", "typeref": "typename:_CacheEntry", "kind": "function", "signature": "(value: Dict[str, Any], ttl_seconds: int)"}, {"_type": "tag", "name": "_now", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/auth/oidc.py", "pattern": "/^def _now() -> float:$/", "language": "Python", "typeref": "typename:float", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_resolve_issuer", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/auth/oidc.py", "pattern": "/^def _resolve_issuer(settings: Settings) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(settings: Settings)"}, {"_type": "tag", "name": "clear_oidc_caches", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/auth/oidc.py", "pattern": "/^def clear_oidc_caches() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fetch_jwks", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/auth/oidc.py", "pattern": "/^async def fetch_jwks($/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "( *, settings: Optional[Settings] = None, http_client: Optional[httpx.AsyncClient] = None )"}, {"_type": "tag", "name": "fetch_oidc_discovery", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/auth/oidc.py", "pattern": "/^async def fetch_oidc_discovery($/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "( *, settings: Optional[Settings] = None, http_client: Optional[httpx.AsyncClient] = None )"}], "hash": "76ecf937cd48f29c44d56cbd46be3936", "format-version": 4, "code-base-name": "rest-api-modernized", "filename": "app/auth/oidc.py", "fields": [{"name": "Optional[_CacheEntry] _DISCOVERY_CACHE", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[_CacheEntry] _JWKS_CACHE", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"70": "51e2f0274e3519ee6277de5e8d3429874852c597"}]}