{"is_source_file": true, "format": "Python", "description": "This file defines REST API endpoints for CRUD (Create, Read, Update, Delete) operations on 'projects' in a FastAPI application, including listing, fetching by ID, creating, updating, and deleting projects. It uses dependency injection for database sessions and user authentication, and interacts with a ProjectService for business logic.", "external_files": ["app.auth.dependencies", "app.common.errors", "app.dependencies.db", "app.domain.schemas", "app.domain.services"], "external_methods": ["get_db_session", "require_roles", "get_current_user", "ProjectService.create", "ProjectService.list", "ProjectService.get", "ProjectService.update", "ProjectService.delete"], "published": ["router"], "classes": [{"name": "ListResponse", "description": "A generic response wrapper for paginated lists of items."}, {"name": "ProjectRead", "description": "Schema for representing project data in responses."}, {"name": "ProjectCreate", "description": "Schema for data required to create a new project."}, {"name": "ProjectUpdate", "description": "Schema for partial updates to an existing project."}], "methods": [{"name": "ProjectRead create_project( payload: ProjectCreate, db: AsyncSession = Depends(get_db_session), user: AuthenticatedUser = Depends(require_roles([\"admin\", \"realm-admin\"])), )", "description": "Endpoint to create a new project; restricted to admins.", "scope": "", "scopeKind": ""}, {"name": "ListResponse[ProjectRead] list_projects( limit: int = Query(default=50, ge=1, le=500, description=\"Maximum number of items to return.\"), offset: int = Query(default=0, ge=0, description=\"Number of items to skip.\"), q: Optional[str] = Query(default=None, description=\"Optional name search (case-insensitive, contains).\"), db: AsyncSession = Depends(get_db_session), _user: AuthenticatedUser = Security(get_current_user), )", "description": "Endpoint to list projects with optional search.", "scope": "", "scopeKind": ""}, {"name": "ProjectRead get_project( project_id: UUID, db: AsyncSession = Depends(get_db_session), _user: AuthenticatedUser = Security(get_current_user), )", "description": "Endpoint to retrieve a project by its UUID.", "scope": "", "scopeKind": ""}, {"name": "ProjectRead update_project( project_id: UUID, payload: ProjectUpdate, db: AsyncSession = Depends(get_db_session), user: AuthenticatedUser = Depends(require_roles([\"admin\", \"realm-admin\"])), )", "description": "Endpoint to update a project; restricted to admins.", "scope": "", "scopeKind": ""}, {"name": "None delete_project( project_id: UUID, db: AsyncSession = Depends(get_db_session), user: AuthenticatedUser = Depends(require_roles([\"admin\", \"realm-admin\"])), )", "description": "Endpoint to delete a project; restricted to admins.", "scope": "", "scopeKind": ""}], "calls": ["ProjectService(db).create", "ProjectService(db).list", "ProjectService(db).get", "ProjectService(db).update", "ProjectService(db).delete"], "search-terms": ["FastAPI projects endpoints", "CRUD projects API", "ProjectService methods", "project UUID route", "authorization admin role", "list projects with search"], "state": 2, "file_id": 41, "knowledge_revision": 105, "git_revision": "e6384165a844054d79619f77ee0d4e438cd1d35f", "revision_history": [{"97": "ac244c573ee69c92dd8ff8571658ce97ccbd030b"}, {"105": "e6384165a844054d79619f77ee0d4e438cd1d35f"}], "ctags": [{"_type": "tag", "name": "create_project", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/routers/projects.py", "pattern": "/^async def create_project($/", "language": "Python", "typeref": "typename:ProjectRead", "kind": "function", "signature": "( payload: ProjectCreate, db: AsyncSession = Depends(get_db_session), user: AuthenticatedUser = Depends(require_roles([\"admin\", \"realm-admin\"])), )"}, {"_type": "tag", "name": "delete_project", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/routers/projects.py", "pattern": "/^async def delete_project($/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "( project_id: UUID, db: AsyncSession = Depends(get_db_session), user: AuthenticatedUser = Depends(require_roles([\"admin\", \"realm-admin\"])), )"}, {"_type": "tag", "name": "get_project", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/routers/projects.py", "pattern": "/^async def get_project($/", "language": "Python", "typeref": "typename:ProjectRead", "kind": "function", "signature": "( project_id: UUID, db: AsyncSession = Depends(get_db_session), _user: AuthenticatedUser = Security(get_current_user), )"}, {"_type": "tag", "name": "list_projects", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/routers/projects.py", "pattern": "/^async def list_projects($/", "language": "Python", "typeref": "typename:ListResponse[ProjectRead]", "kind": "function", "signature": "( limit: int = Query(default=50, ge=1, le=500, description=\"Maximum number of items to return.\"), offset: int = Query(default=0, ge=0, description=\"Number of items to skip.\"), q: Optional[str] = Query(default=None, description=\"Optional name search (case-insensitive, contains).\"), db: AsyncSession = Depends(get_db_session), _user: AuthenticatedUser = Security(get_current_user), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/routers/projects.py", "pattern": "/^router = APIRouter(prefix=\"\\/projects\", tags=[\"Projects\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_project", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/routers/projects.py", "pattern": "/^async def update_project($/", "language": "Python", "typeref": "typename:ProjectRead", "kind": "function", "signature": "( project_id: UUID, payload: ProjectUpdate, db: AsyncSession = Depends(get_db_session), user: AuthenticatedUser = Depends(require_roles([\"admin\", \"realm-admin\"])), )"}], "hash": "d0a19730048d2f9a16c597bfb95504a4", "format-version": 4, "code-base-name": "rest-api-modernized", "filename": "app/routers/projects.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/projects\", tags=[\"Projects\"])", "scope": "", "scopeKind": "", "description": "unavailable"}]}