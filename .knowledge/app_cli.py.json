{"is_source_file": true, "format": "Python", "description": "This file defines CLI utilities for local development and seeding demo data into a database for the 'rest-api-modernized' project. It includes commands to seed data, delete existing data, and related database operations, utilizing SQLAlchemy and Typer.", "external_files": ["app.core.config", "app.db.session", "app.models.domain"], "external_methods": ["typer.Typer", "typer.BadParameter", "get_settings", "get_sessionmaker"], "published": ["app", "seed", "main"], "classes": [{"name": "_SeedCounts", "description": "A dataclass representing counts of seeded projects, tasks, and vulnerabilities."}], "methods": [{"name": "None _require_database_url(settings: Settings)", "description": "Validates that the environment variable DATABASE_URL is set before performing database operations.", "scope": "", "scopeKind": ""}, {"name": "None _truncate_all(session: AsyncSession)", "description": "Deletes all rows from the domain tables Vulnerability, Task, and Project.", "scope": "", "scopeKind": ""}, {"name": "bool _has_any_data(session: AsyncSession)", "description": "Checks if any of the domain tables already contain data.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Sequence[dict]] _seed_dataset()", "description": "Defines the sample dataset for projects, tasks, and vulnerabilities used for seeding.", "scope": "", "scopeKind": ""}, {"name": "_SeedCounts _insert_seed_data(session: AsyncSession)", "description": "Inserts the seed dataset into the database, creating projects, tasks, and vulnerabilities, and returns counts.", "scope": "", "scopeKind": ""}, {"name": "None seed( reset: bool = typer.Option( False, \"--reset\", help=\"If set, deletes existing demo data (and all rows) before seeding.\", ), )", "description": "CLI command for seeding demo data, with option to reset existing data.", "scope": "", "scopeKind": ""}, {"name": "None main(argv: Optional[List[str]] = None)", "description": "Entrypoint to run the Typer CLI.", "scope": "", "scopeKind": ""}, {"name": "int _run()", "scope": "seed", "scopeKind": "function", "description": "unavailable"}], "calls": ["delete(Vulnerability)", "delete(Task)", "delete(Project)", "select(Project.id)", "select(Task.id)", "select(Vulnerability.id)", "get_settings", "get_sessionmaker", "session.execute", "session.flush", "session.add", "session.commit", "typer.echo", "asyncio.run", "sys.argv"], "search-terms": ["CLI utilities", "seed data", "async SQLAlchemy", "rest-api-modernized", "seed", "database URL"], "state": 2, "file_id": 46, "knowledge_revision": 112, "git_revision": "dbef38bcc603e353ea4e51971d3a387334d832e2", "ctags": [{"_type": "tag", "name": "_SeedCounts", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/cli.py", "pattern": "/^class _SeedCounts:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_has_any_data", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/cli.py", "pattern": "/^async def _has_any_data(session: AsyncSession) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(session: AsyncSession)"}, {"_type": "tag", "name": "_insert_seed_data", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/cli.py", "pattern": "/^async def _insert_seed_data(session: AsyncSession) -> _SeedCounts:$/", "language": "Python", "typeref": "typename:_SeedCounts", "kind": "function", "signature": "(session: AsyncSession)"}, {"_type": "tag", "name": "_require_database_url", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/cli.py", "pattern": "/^def _require_database_url(settings: Settings) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(settings: Settings)"}, {"_type": "tag", "name": "_run", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/cli.py", "pattern": "/^    async def _run() -> int:$/", "file": true, "language": "Python", "typeref": "typename:int", "kind": "function", "signature": "()", "scope": "seed", "scopeKind": "function"}, {"_type": "tag", "name": "_seed_dataset", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/cli.py", "pattern": "/^def _seed_dataset() -> Dict[str, Sequence[dict]]:$/", "language": "Python", "typeref": "typename:Dict[str,Sequence[dict]]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_truncate_all", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/cli.py", "pattern": "/^async def _truncate_all(session: AsyncSession) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(session: AsyncSession)"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/cli.py", "pattern": "/^app = typer.Typer($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/cli.py", "pattern": "/^def main(argv: Optional[List[str]] = None) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(argv: Optional[List[str]] = None)"}, {"_type": "tag", "name": "seed", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/cli.py", "pattern": "/^def seed($/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "( reset: bool = typer.Option( False, \"--reset\", help=\"If set, deletes existing demo data (and all rows) before seeding.\", ), )"}], "hash": "47ded57c68882e908a23149a171e3e04", "format-version": 4, "code-base-name": "rest-api-modernized", "filename": "app/cli.py", "fields": [{"name": "app = typer.Typer(", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"112": "dbef38bcc603e353ea4e51971d3a387334d832e2"}]}