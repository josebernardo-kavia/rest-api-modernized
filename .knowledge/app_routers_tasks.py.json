{"is_source_file": true, "format": "Python", "description": "This file defines REST API endpoints for managing tasks using FastAPI, including creating, listing, retrieving, updating, and deleting tasks. It includes route definitions, dependency injections, error handling, and interactions with a TaskService.", "external_files": ["app.auth.dependencies", "app.common.errors", "app.dependencies.db", "app.domain.errors", "app.domain.schemas", "app.domain.services"], "external_methods": ["get_current_user", "require_roles", "COMMON_ERROR_RESPONSES", "get_db_session", "TaskService.create", "TaskService.list", "TaskService.get", "TaskService.update", "TaskService.delete"], "published": ["router"], "classes": [{"name": "ListResponse", "description": "A generic response envelope for paginated lists containing items and total count."}, {"name": "TaskRead", "description": "Schema representing a read-only view of a task."}, {"name": "TaskCreate", "description": "Schema used for creating a new task."}, {"name": "TaskUpdate", "description": "Schema for updating an existing task."}], "methods": [{"name": "TaskRead create_task( payload: TaskCreate, db: AsyncSession = Depends(get_db_session), user: AuthenticatedUser = Security(get_current_user), )", "description": "Endpoint to create a new task. Validates input, calls TaskService.create, and returns the created task.", "scope": "", "scopeKind": ""}, {"name": "ListResponse[TaskRead] list_tasks( limit: int = Query(default=50, ge=1, le=500, description=\"Maximum number of items to return.\"), offset: int = Query(default=0, ge=0, description=\"Number of items to skip.\"), project_id: Optional[UUID] = Query(default=None, description=\"Filter by project id.\"), status_filter: Optional[str] = Query(default=None, alias=\"status\", description=\"Filter by status.\"), q: Optional[str] = Query(default=None, description=\"Optional title search (case-insensitive, contains).\"), db: AsyncSession = Depends(get_db_session), _user: AuthenticatedUser = Security(get_current_user), )", "description": "Endpoint to list tasks with pagination and optional filters. Calls TaskService.list and returns a paginated ListResponse.", "scope": "", "scopeKind": ""}, {"name": "TaskRead get_task( task_id: UUID, db: AsyncSession = Depends(get_db_session), _user: AuthenticatedUser = Security(get_current_user), )", "description": "Endpoint to retrieve a task by ID. Calls TaskService.get and returns the task.", "scope": "", "scopeKind": ""}, {"name": "TaskRead update_task( task_id: UUID, payload: TaskUpdate, db: AsyncSession = Depends(get_db_session), user: AuthenticatedUser = Security(get_current_user), )", "description": "Endpoint to update a task partially. Calls TaskService.update and returns the updated task.", "scope": "", "scopeKind": ""}, {"name": "None delete_task( task_id: UUID, db: AsyncSession = Depends(get_db_session), user: AuthenticatedUser = Depends(require_roles([\"admin\", \"realm-admin\"])), )", "description": "Endpoint to delete a task; requires admin roles. Calls TaskService.delete.", "scope": "", "scopeKind": ""}], "calls": ["TaskService(db).create", "TaskService(db).list", "TaskService(db).get", "TaskService(db).update", "TaskService(db).delete"], "search-terms": ["tasks.py", "FastAPI", "Task CRUD", "TaskService", "Tasks routes", "Dependency injection"], "state": 2, "file_id": 42, "knowledge_revision": 98, "git_revision": "ac244c573ee69c92dd8ff8571658ce97ccbd030b", "ctags": [{"_type": "tag", "name": "create_task", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/routers/tasks.py", "pattern": "/^async def create_task($/", "language": "Python", "typeref": "typename:TaskRead", "kind": "function", "signature": "( payload: TaskCreate, db: AsyncSession = Depends(get_db_session), user: AuthenticatedUser = Security(get_current_user), )"}, {"_type": "tag", "name": "delete_task", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/routers/tasks.py", "pattern": "/^async def delete_task($/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "( task_id: UUID, db: AsyncSession = Depends(get_db_session), user: AuthenticatedUser = Depends(require_roles([\"admin\", \"realm-admin\"])), )"}, {"_type": "tag", "name": "get_task", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/routers/tasks.py", "pattern": "/^async def get_task($/", "language": "Python", "typeref": "typename:TaskRead", "kind": "function", "signature": "( task_id: UUID, db: AsyncSession = Depends(get_db_session), _user: AuthenticatedUser = Security(get_current_user), )"}, {"_type": "tag", "name": "list_tasks", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/routers/tasks.py", "pattern": "/^async def list_tasks($/", "language": "Python", "typeref": "typename:ListResponse[TaskRead]", "kind": "function", "signature": "( limit: int = Query(default=50, ge=1, le=500, description=\"Maximum number of items to return.\"), offset: int = Query(default=0, ge=0, description=\"Number of items to skip.\"), project_id: Optional[UUID] = Query(default=None, description=\"Filter by project id.\"), status_filter: Optional[str] = Query(default=None, alias=\"status\", description=\"Filter by status.\"), q: Optional[str] = Query(default=None, description=\"Optional title search (case-insensitive, contains).\"), db: AsyncSession = Depends(get_db_session), _user: AuthenticatedUser = Security(get_current_user), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/routers/tasks.py", "pattern": "/^router = APIRouter(prefix=\"\\/tasks\", tags=[\"Tasks\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_task", "path": "/home/kavia/workspace/code-generation/rest-api-modernized/app/routers/tasks.py", "pattern": "/^async def update_task($/", "language": "Python", "typeref": "typename:TaskRead", "kind": "function", "signature": "( task_id: UUID, payload: TaskUpdate, db: AsyncSession = Depends(get_db_session), user: AuthenticatedUser = Security(get_current_user), )"}], "hash": "056123dcda27efe6e8b9b528ebfb0b6f", "format-version": 4, "code-base-name": "rest-api-modernized", "filename": "app/routers/tasks.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/tasks\", tags=[\"Tasks\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"98": "ac244c573ee69c92dd8ff8571658ce97ccbd030b"}]}